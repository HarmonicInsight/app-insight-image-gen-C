<UserControl x:Class="InsightMediaGenerator.Views.SimpleImageView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="800">
    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
        <StackPanel>
            <!-- Status -->
            <Border Background="{Binding SdConnected, Converter={StaticResource BoolToColorConverter}}"
                    CornerRadius="4" Padding="8" Margin="0,0,0,15" HorizontalAlignment="Left">
                <TextBlock Text="{Binding StatusMessage}" Foreground="White" FontWeight="SemiBold"/>
            </Border>

            <!-- Prompt -->
            <TextBlock Text="Prompt" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <TextBox Text="{Binding Prompt, UpdateSourceTrigger=PropertyChanged}"
                     AcceptsReturn="True" TextWrapping="Wrap" Height="100" Margin="0,0,0,15"/>

            <!-- Negative Prompt -->
            <TextBlock Text="Negative Prompt" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <TextBox Text="{Binding NegativePrompt, UpdateSourceTrigger=PropertyChanged}"
                     AcceptsReturn="True" TextWrapping="Wrap" Height="60" Margin="0,0,0,15"/>

            <!-- Model Selection -->
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Model" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding Models}"
                              SelectedItem="{Binding SelectedModel}"
                              IsEnabled="{Binding SdConnected}"/>
                </StackPanel>

                <StackPanel Grid.Column="1">
                    <TextBlock Text="LoRA" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding Loras}"
                              SelectedItem="{Binding SelectedLora}"
                              IsEnabled="{Binding SdConnected}"/>
                </StackPanel>
            </Grid>

            <!-- LoRA Weight -->
            <TextBlock Text="LoRA Weight" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Slider Value="{Binding LoraWeight}" Minimum="0" Maximum="1.5"
                        TickFrequency="0.1" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Text="{Binding LoraWeight, StringFormat=F1}"
                         TextAlignment="Center" Margin="10,0,0,0"/>
            </Grid>

            <!-- Resolution and Sampler -->
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Resolution" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding Resolutions}"
                              SelectedItem="{Binding SelectedResolution}"/>
                </StackPanel>

                <StackPanel Grid.Column="1">
                    <TextBlock Text="Sampler" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding Samplers}"
                              SelectedItem="{Binding SelectedSampler}"/>
                </StackPanel>
            </Grid>

            <!-- Steps -->
            <TextBlock Text="Steps" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Slider Value="{Binding Steps}" Minimum="10" Maximum="100"
                        TickFrequency="1" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Text="{Binding Steps}"
                         TextAlignment="Center" Margin="10,0,0,0"/>
            </Grid>

            <!-- CFG Scale -->
            <TextBlock Text="CFG Scale" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Slider Value="{Binding CfgScale}" Minimum="1" Maximum="20"
                        TickFrequency="0.5" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Text="{Binding CfgScale, StringFormat=F1}"
                         TextAlignment="Center" Margin="10,0,0,0"/>
            </Grid>

            <!-- Batch Settings -->
            <Grid Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Batch Size" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding BatchSizes}"
                              SelectedItem="{Binding BatchSize}"/>
                </StackPanel>

                <StackPanel Grid.Column="1">
                    <TextBlock Text="Set Count" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding SetCounts}"
                              SelectedItem="{Binding SetCount}"/>
                </StackPanel>
            </Grid>

            <!-- Progress -->
            <TextBlock Text="{Binding ProgressMessage}" Margin="0,0,0,5"
                       Visibility="{Binding ProgressMessage, Converter={StaticResource StringToVisibilityConverter}}"/>
            <ProgressBar Value="{Binding Progress}" Height="20" Margin="0,0,0,15"
                         Visibility="{Binding IsGenerating, Converter={StaticResource BoolToVisibilityConverter}}"/>

            <!-- Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="Generate" Command="{Binding GenerateCommand}"
                        Width="120" Height="40" Margin="0,0,10,0"
                        Style="{StaticResource PrimaryButtonStyle}"/>
                <Button Content="Cancel" Command="{Binding CancelGenerationCommand}"
                        Width="100" Height="40"
                        IsEnabled="{Binding IsGenerating}"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>

<UserControl x:Class="InsightMediaGenerator.Views.AudioView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800">
    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
        <StackPanel>
            <!-- Status -->
            <Border Background="{Binding VoicevoxConnected, Converter={StaticResource BoolToColorConverter}}"
                    CornerRadius="4" Padding="8" Margin="0,0,0,15" HorizontalAlignment="Left">
                <TextBlock Text="{Binding StatusMessage}" Foreground="White" FontWeight="SemiBold"/>
            </Border>

            <!-- Text Input -->
            <TextBlock Text="Text" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <TextBox Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"
                     AcceptsReturn="True" TextWrapping="Wrap" Height="120" Margin="0,0,0,15"/>

            <!-- Speaker Selection -->
            <TextBlock Text="Speaker" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <ComboBox ItemsSource="{Binding Speakers}"
                      SelectedItem="{Binding SelectedSpeaker}"
                      DisplayMemberPath="DisplayName"
                      IsEnabled="{Binding VoicevoxConnected}"
                      Margin="0,0,0,15"/>

            <!-- Speed -->
            <TextBlock Text="Speed" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Slider Value="{Binding Speed}" Minimum="0.5" Maximum="2.0"
                        TickFrequency="0.1" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Text="{Binding Speed, StringFormat=F1}"
                         TextAlignment="Center" Margin="10,0,0,0"/>
            </Grid>

            <!-- Pitch -->
            <TextBlock Text="Pitch" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Slider Value="{Binding Pitch}" Minimum="-0.15" Maximum="0.15"
                        TickFrequency="0.01" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Text="{Binding Pitch, StringFormat=F2}"
                         TextAlignment="Center" Margin="10,0,0,0"/>
            </Grid>

            <!-- Intonation -->
            <TextBlock Text="Intonation" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Slider Value="{Binding Intonation}" Minimum="0" Maximum="2.0"
                        TickFrequency="0.1" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Text="{Binding Intonation, StringFormat=F1}"
                         TextAlignment="Center" Margin="10,0,0,0"/>
            </Grid>

            <!-- Volume -->
            <TextBlock Text="Volume" FontWeight="SemiBold" Margin="0,0,0,5"/>
            <Grid Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Slider Value="{Binding Volume}" Minimum="0" Maximum="2.0"
                        TickFrequency="0.1" IsSnapToTickEnabled="True" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Text="{Binding Volume, StringFormat=F1}"
                         TextAlignment="Center" Margin="10,0,0,0"/>
            </Grid>

            <!-- Save Options -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                <CheckBox Content="Save to file" IsChecked="{Binding SaveFile}" VerticalAlignment="Center"/>
                <TextBox Text="{Binding FileName, UpdateSourceTrigger=PropertyChanged}"
                         Width="200" Margin="15,0,0,0"
                         IsEnabled="{Binding SaveFile}"/>
            </StackPanel>

            <!-- Progress -->
            <TextBlock Text="{Binding ProgressMessage}" Margin="0,0,0,15"
                       Visibility="{Binding ProgressMessage, Converter={StaticResource StringToVisibilityConverter}}"/>

            <!-- Generate Button -->
            <Button Content="Generate Audio" Command="{Binding GenerateCommand}"
                    Width="150" Height="40" Margin="0,0,0,20"
                    Background="#28a745" Foreground="White" FontWeight="SemiBold"
                    HorizontalAlignment="Center"/>

            <!-- Audio Player Controls -->
            <Border BorderBrush="#ddd" BorderThickness="1" CornerRadius="8"
                    Padding="15" Margin="0,0,0,15"
                    Visibility="{Binding HasGeneratedAudio, Converter={StaticResource BoolToVisibilityConverter}}">
                <StackPanel>
                    <TextBlock Text="Audio Player" FontWeight="SemiBold" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="Play" Command="{Binding PlayCommand}"
                                Width="80" Height="35" Margin="0,0,10,0"/>
                        <Button Content="Pause" Command="{Binding PauseCommand}"
                                Width="80" Height="35" Margin="0,0,10,0"/>
                        <Button Content="Stop" Command="{Binding StopCommand}"
                                Width="80" Height="35" Margin="0,0,10,0"/>
                        <Button Content="Download" Command="{Binding DownloadCommand}"
                                Width="100" Height="35"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
